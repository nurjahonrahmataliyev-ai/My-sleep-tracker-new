<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Daily Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0f172a">

    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 20px;
        }
        body, .app-card {
            background-color: #f8fafc;
            color: #0f172a;
        }
        .app-card {
            background-color: #ffffff;
            box-shadow: 0 6px 16px rgba(15, 23, 42, 0.08);
            border: 1px solid #e2e8f0;
        }
        .input-field {
            background-color: #f1f5f9;
            border: 1px solid #cbd5e1;
        }
        body.dark, .dark .app-card {
            background-color: #0f172a;
            color: #f1f5f9;
        }
        .dark .app-card {
            background-color: #1e293b;
            border: 1px solid #334155;
        }
        .dark .input-field {
            background-color: #334155;
            color: #f1f5f9;
            border: 1px solid #475569;
        }
        .label-muted {
            color: #64748b;
        }
        .dark .label-muted {
            color: #94a3b8;
        }
    </style>
</head>
<body>
    <div class="container min-h-screen">
        <header class="py-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4 border-b border-gray-200 dark:border-gray-800 mb-6">
            <div>
                <p class="uppercase text-xs tracking-[0.3em] label-muted">Personal Planner</p>
                <h1 class="text-3xl font-extrabold text-indigo-600 dark:text-indigo-400">Daily Focus Canvas</h1>
                <p class="text-sm label-muted">Calm, motivating, and optimized for 1% progress.</p>
            </div>
            <div class="flex items-center gap-3">
                <div class="text-right">
                    <p class="text-xs uppercase label-muted">Sleep Window</p>
                    <p class="text-sm font-semibold">10:30â€“10:40 PM</p>
                </div>
                <button id="theme-toggle" class="p-2 rounded-lg bg-gray-200 dark:bg-gray-700 transition" aria-label="Toggle theme">
                    <span id="theme-icon">ðŸŒ™</span>
                </button>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <section class="app-card p-6 rounded-2xl lg:col-span-1 h-fit space-y-6">
                <div>
                    <h2 class="text-xl font-bold">Inputs</h2>
                    <p class="text-sm label-muted">Keep it simple. We do the thinking for you.</p>
                </div>

                <div class="space-y-4">
                    <div>
                        <label class="block text-xs font-bold uppercase label-muted mb-1">Current time</label>
                        <div class="flex items-center gap-2">
                            <input type="time" id="current-time" class="w-full p-2 rounded-lg input-field outline-none focus:ring-2 focus:ring-indigo-500">
                            <button id="use-now" class="px-3 py-2 rounded-lg bg-indigo-100 text-indigo-700 font-semibold">Now</button>
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-bold uppercase label-muted mb-1">Energy level</label>
                        <select id="energy-level" class="w-full p-2 rounded-lg input-field outline-none focus:ring-2 focus:ring-indigo-500">
                            <option value="high">High</option>
                            <option value="medium" selected>Medium</option>
                            <option value="low">Low</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-xs font-bold uppercase label-muted mb-1">Context (optional)</label>
                        <textarea id="context-input" rows="3" placeholder="Tired, stressed, exam soon..." class="w-full p-2 rounded-lg input-field outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
                    </div>
                </div>

                <div class="space-y-3">
                    <div>
                        <p class="text-xs font-bold uppercase label-muted">Daily priorities</p>
                        <ul class="text-sm mt-2 space-y-1">
                            <li>1. SAT preparation</li>
                            <li>2. School & homework</li>
                            <li>3. Gym (17:00, fixed)</li>
                            <li>4. Read Atomic Habits</li>
                            <li>5. Life habits & responsibilities</li>
                        </ul>
                    </div>
                    <div>
                        <p class="text-xs font-bold uppercase label-muted">Completion check</p>
                        <div class="mt-2 space-y-2 text-sm">
                            <label class="flex items-center gap-2"><input type="checkbox" id="done-sat"> SAT prep done</label>
                            <label class="flex items-center gap-2"><input type="checkbox" id="done-homework"> Homework done</label>
                            <label class="flex items-center gap-2"><input type="checkbox" id="done-gym"> Gym done</label>
                            <label class="flex items-center gap-2"><input type="checkbox" id="done-reading"> Read Atomic Habits</label>
                            <label class="flex items-center gap-2"><input type="checkbox" id="done-life"> Life responsibilities</label>
                        </div>
                    </div>
                </div>

                <div class="space-y-3">
                    <p class="text-xs font-bold uppercase label-muted">Habits scorecard</p>
                    <div class="grid grid-cols-2 gap-3 text-sm">
                        <label class="flex items-center gap-2"><input type="checkbox" data-habit="good" value="Make my bed"> Make my bed</label>
                        <label class="flex items-center gap-2"><input type="checkbox" data-habit="good" value="Brush my teeth"> Brush my teeth</label>
                        <label class="flex items-center gap-2"><input type="checkbox" data-habit="good" value="Do homework"> Do homework</label>
                        <label class="flex items-center gap-2"><input type="checkbox" data-habit="good" value="Go to gym"> Go to gym</label>
                        <label class="flex items-center gap-2"><input type="checkbox" data-habit="good" value="Read Atomic Habits"> Read Atomic Habits</label>
                        <label class="flex items-center gap-2"><input type="checkbox" data-habit="good" value="Feed cows"> Feed cows</label>
                        <label class="flex items-center gap-2"><input type="checkbox" data-habit="neutral" value="Wake up"> Wake up</label>
                        <label class="flex items-center gap-2"><input type="checkbox" data-habit="neutral" value="Wash face"> Wash face</label>
                        <label class="flex items-center gap-2"><input type="checkbox" data-habit="neutral" value="Meals"> Meals</label>
                        <label class="flex items-center gap-2"><input type="checkbox" data-habit="neutral" value="Get dressed"> Get dressed</label>
                        <label class="flex items-center gap-2"><input type="checkbox" data-habit="neutral" value="School"> School</label>
                        <label class="flex items-center gap-2"><input type="checkbox" data-habit="bad" value="Watch TV"> Watch TV</label>
                        <label class="flex items-center gap-2"><input type="checkbox" data-habit="bad" value="Scroll social"> Scroll social / games</label>
                    </div>
                    <p id="habit-summary" class="text-xs label-muted"></p>
                </div>

                <button id="generate-plan" class="w-full py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition transform active:scale-95 shadow-lg shadow-indigo-500/30">
                    What should I do right now?
                </button>
                <p id="status-msg" class="text-center text-sm font-medium h-4"></p>
            </section>

            <section class="lg:col-span-2 space-y-6">
                <div class="app-card p-6 rounded-2xl">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4">
                        <div>
                            <p class="text-xs uppercase label-muted">Use Canvas always</p>
                            <h3 class="text-lg font-bold">Daily Focus Canvas</h3>
                        </div>
                        <div class="text-sm label-muted">
                            Remaining today: <span id="remaining-hours" class="font-semibold">--</span>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="space-y-3">
                            <div class="p-4 rounded-xl bg-indigo-50 dark:bg-indigo-900/40">
                                <p class="text-xs uppercase label-muted">Do this now</p>
                                <p id="do-now" class="text-lg font-semibold">Set your time and ask.</p>
                            </div>
                            <div>
                                <p class="text-xs uppercase label-muted">How to do it better</p>
                                <ul id="execution-tips" class="list-disc ml-5 text-sm space-y-1"></ul>
                            </div>
                            <div>
                                <p class="text-xs uppercase label-muted">1% improvement</p>
                                <p id="improvement-tip" class="text-sm">Small wins will appear here.</p>
                            </div>
                        </div>
                        <div>
                            <p class="text-xs uppercase label-muted">Canvas timeline</p>
                            <canvas id="plannerCanvas" height="160" class="w-full mt-2 rounded-xl bg-slate-100 dark:bg-slate-800"></canvas>
                            <p class="text-xs label-muted mt-2">No heavy thinking after 9:30 PM.</p>
                        </div>
                    </div>
                </div>

                <div class="app-card p-6 rounded-2xl">
                    <p class="text-xs uppercase label-muted">Time-blocked mini plan</p>
                    <div id="mini-plan" class="mt-3 space-y-3 text-sm"></div>
                </div>

                <div class="app-card p-6 rounded-2xl">
                    <p class="text-xs uppercase label-muted">Why this plan works</p>
                    <p id="plan-reason" class="mt-3 text-sm">Priorities, energy, and time windows will be balanced here.</p>
                </div>
            </section>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
